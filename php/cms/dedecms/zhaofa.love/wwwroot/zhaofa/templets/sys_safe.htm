<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta content="text/html; charset=<?php echo $cfg_soft_lang; ?>" http-equiv="Content-Type">
    <title>系统配置参数 - 验证安全设置</title>
    <link href="css/base.css" rel="stylesheet" type="text/css">
    <script src="../include/js/jquery/jquery.js" type="text/javascript"></script>
    <script type="text/javascript">
        var $ = jQuery;
        $(document).ready(function () {
            addIterm("qiterm", "qbox");
        })

        //增加选项
        function addIterm(qiterm, qbox) {
            if ($("#" + qiterm)) {
                var iterm = $("#" + qiterm).children().clone()
                $("#" + qbox).append(iterm)
                //将其置为显示状态
                $("#" + qbox + " > #" + qiterm).show();
            }
        }

        //删除当前选项
        function delIterm(obj) {
            $(obj).parent().parent().remove();
        }
    </script>
</head>
<body background='images/allbg.gif' leftmargin='8' topmargin='8'>
<form action="sys_safe.php" method="post" name="form1">
    <input name="dopost" type="hidden" value="save">
    <table align="center" bgcolor="#D6D6D6" border="0" cellpadding="3" cellspacing="1" width="98%">

        <tr>
            <td background="images/tbg.gif" bgcolor="#FFFFFF" colspan="2" height="26" style="padding-left:10px;"><b>验证码参数设置</b>
            </td>
        </tr>
        <tr bgcolor="#FFFFFF">
            <td height="24" width="26%">开启系统验证码：<br></td>
            <td width="74%"><input id="gdopen1" name="gdopen[]" type="checkbox"
                                   value="1" <?php echo (preg_match("/1/",$safe_gdopen))? "checked" : ""; ?>>
                <label for='gdopen1'>注册会员 </label>
                <input id="gdopen2" name="gdopen[]" type="checkbox"
                       value="2" <?php echo (preg_match("/2/",$safe_gdopen))? "checked" : ""; ?>>
                <label for='gdopen2'>前台登陆 </label>
                <input id="gdopen3" name="gdopen[]" type="checkbox"
                       value="3" <?php echo (preg_match("/3/",$safe_gdopen))? "checked" : ""; ?>>
                <label for='gdopen3'>会员投稿 </label>
                <input id="gdopen4" name="gdopen[]" type="checkbox"
                       value="4" <?php echo (preg_match("/4/",$safe_gdopen))? "checked" : ""; ?>>
                <label for='gdopen4'>文档评论 </label>
                <input id="gdopen5" name="gdopen[]" type="checkbox"
                       value="5" <?php echo (preg_match("/5/",$safe_gdopen))? "checked" : ""; ?>>
                <label for='gdopen5'>会员短消息 </label>
                <input id="gdopen6" name="gdopen[]" type="checkbox"
                       value="6" <?php echo (preg_match("/6/",$safe_gdopen))? "checked" : ""; ?>>
                <label for='gdopen6'>后台登陆 </label>
                <input id="gdopen7" name="gdopen[]" type="checkbox"
                       value="7" <?php echo (preg_match("/7/",$safe_gdopen))? "checked" : ""; ?>>
                <label for='gdopen7'>问答 </label></td>
        </tr>
        <tr bgcolor="#FFFFFF">
            <td height="24">验证码生成类型：</td>
            <td><input class="np" id="cttpe1" name="codetype" type="radio"
                       value="1" <?php echo ($safe_codetype == 1)? "checked" : ""; ?>>
                <label for="cttpe1">数字</label>
                <input class="np" id="cttpe2" name="codetype" type="radio"
                       value="2" <?php echo ($safe_codetype == 2)? "checked" : ""; ?>>
                <label for="cttpe2">英文</label>
                <input class="np" id="cttpe3" name="codetype" type="radio"
                       value="3" <?php echo ($safe_codetype == 3)? "checked" : ""; ?>>
                <label for="cttpe3">单词</label></td>
        </tr>
        <tr bgcolor="#FFFFFF">
            <td height="24">选择验证码文件类型：</td>
            <td><input id="dtype1" name="gdtype" type="radio"
                       value="1" <?php echo ($safe_gdtype == 1)? "checked" : ""; ?>>
                <label for="dtype1">jpg &nbsp;</label>
                <input id="dtype2" name="gdtype" type="radio"
                       value="2" <?php echo ($safe_gdtype == 2)? "checked" : ""; ?>>
                <label for="dtype2">png
                    &nbsp;</label>
                <input id="dtype3" name="gdtype" type="radio"
                       value="3" <?php echo ($safe_gdtype == 3)? "checked" : ""; ?>>
                <label for="dtype3">gif (GD&gt;= 2.0.28)</label></td>
        </tr>
        <tr bgcolor="#FFFFFF">
            <td height="24">验证码干扰设置：</td>
            <td><input id="dstyle1" name="gdstyle[]" type="checkbox"
                       value="1" <?php echo (preg_match("/1/",$safe_gdstyle))? "checked" : ""; ?>>
                <label for="dstyle1">背景线 &nbsp;</label>
                <input id="dstyle2" name="gdstyle[]" type="checkbox"
                       value="2" <?php echo (preg_match("/2/",$safe_gdstyle))? "checked" : ""; ?>>
                <label for="dstyle2">背景图像
                    &nbsp;</label>
                <input id="dstyle3" name="gdstyle[]" type="checkbox"
                       value="3" <?php echo (preg_match("/3/",$safe_gdstyle))? "checked" : ""; ?>>
                <label for="dstyle3">混杂文本色</label></td>
        </tr>
        <tr bgcolor="#FFFFFF">
            <td height="24">验证码图片大小（设置为0为不限）：</td>
            <td> 宽：
                <input id="gd_wwidth" name="gd_wwidth" type=text value="<?php echo empty($safe_wwidth)? "" :$safe_wwidth
                ;?>" size="5">
                px
                高：
                <input id="gd_wheight" name="gd_wheight" type=text value="<?php echo empty($safe_wheight)? ""
                :$safe_wheight ;?>" size="5">
                px
            </td>
        </tr>
        <tr bgcolor="#FFFFFF">
            <td height="24">验证码字符数：</td>
            <td><input id="codelen" name="codelen" type="text" value="<?php echo empty($safe_codelen)? "" :$safe_codelen
                ;?>">
                个(类型设为单词,该属性无效)
            </td>
        </tr>
        <tr bgcolor="#FFFFFF">
            <td colspan="2" height="24">&nbsp;</td>
        </tr>
        <tr>
            <td background="images/tbg.gif" bgcolor="#FFFFFF" colspan="2" height="26"><b>验证问题设置</b></td>
        </tr>
        <tr bgcolor="#FFFFFF">
            <td height="24"> 1、使用简单的文字问题(例如:11+5=?，请输入中文答案)<BR>
                2、使用html代码(例如将问题做成一张小图片 &lt;img src="地址" /&gt;)<BR>
                3、多个问题将随机出现一个问题。
            </td>
            <td>
                <table border="0" cellpadding="0" cellspacing="2" width="98%">
                    <tbody id="qiterm" style="display:none">
                    <tr>
                        <td width="50%"><input name="question[]" size="30" type="text" value=""/></td>
                        <td width="50%"><input name="answer[]" type="text" value=""/>
                            <a onClick="delIterm(this);" style="cursor: pointer; color: rgb(250, 137, 27);">[删除]</a>
                        </td>
                    </tr>
                    </tbody>
                    <thead>
                    <td width="50%">问题</td>
                    <td width="50%">答案<a onclick='addIterm("qiterm","qbox");'
                                         style='cursor: pointer; color: rgb(0, 0, 255);'>[+增加]</a></td>
                    </tr>
                    </thead>

                    <tbody>
                    <?php
            	if(!empty($safefaqs))
                {
                	foreach ($safefaqs as $key => $safefaq) {


                    ?>
                    <tr>
                        <td width="50%"><input name="question[]" size="30" type="text"
                                               value="<?php echo htmlspecialchars($safefaq['question']);?>"/></td>
                        <td width="50%"><input name="answer[]" type="text" value="<?php echo $safefaq['answer']?>"/>
                            <a onClick="delIterm(this);" style="cursor: pointer; color: rgb(250, 137, 27);">[删除]</a>
                        </td>
                    </tr>
                    <?php
           			}
           		}
           ?>
                    </tbody>
                    <tbody id="qbox">
                    </tbody>
                </table>
            </td>
        </tr>
        <tr bgcolor="#FFFFFF">
            <td height="24">注册开启验证问题:</td>
            <td><input class="np" name="gdfaq_reg" type="radio"
                       value="1" <?php echo ($safe_faq_reg == 1)? "checked" : ""; ?>>
                开启
                <input class="np" name="gdfaq_reg" type="radio"
                       value="0" <?php echo ($safe_faq_reg == 0)? "checked" : ""; ?>>
                关闭
            </td>
        </tr>
        <tr bgcolor="#FFFFFF">
            <td height="24">会员投稿开启验证问题:</td>
            <td><input class="np" name="gdfaq_send" type="radio"
                       value="1" <?php echo ($safe_faq_send == 1)? "checked" : ""; ?>>
                开启
                <input class="np" name="gdfaq_send" type="radio"
                       value="0" <?php echo ($safe_faq_send == 0)? "checked" : ""; ?>>
                关闭
            </td>
        </tr>
        <tr bgcolor="#FFFFFF">
            <td height="24">短消息开启验证问题:</td>
            <td><input class="np" name="gdfaq_msg" type="radio"
                       value="1" <?php echo ($safe_faq_msg == 1)? "checked" : ""; ?>>
                开启
                <input class="np" name="gdfaq_msg" type="radio"
                       value="0" <?php echo ($safe_faq_msg == 0)? "checked" : ""; ?>>
                关闭
            </td>
        </tr>
        <tr bgcolor="#F9FCEF">
            <td colspan="2" height="37">
                <table border="0" cellpadding="0" cellspacing="0" width="100%">
                    <tr>
                        <td width="7%">&nbsp;</td>
                        <td align="center" width="93%"><input border="0" class="np" height="22" name="imageField"
                                                              src="images/button_ok.gif" type="image" width="60">
                            &nbsp; <img height="22" src="images/button_reset.gif" width="60"></td>
                    </tr>
                </table>
            </td>
        </tr>

    </table>
</form>
</body>
</html>
