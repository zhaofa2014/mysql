<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta content="text/html; charset=<?php echo $cfg_soft_lang; ?>" http-equiv="Content-Type">
    <title>栏目管理</title>
    <link href="css/base.css" rel="stylesheet" type="text/css">
    <script language="javascript" src="js/global.js"></script>
    <script language="javascript" src="js/context_menu.js"></script>
    <script language="javascript" src="js/ieemu.js"></script>
    <script language="javascript" src="js/dialog.js"></script>
    <script language="javascript" src="../include/js/dedeajax2.js"></script>
    <script language="javascript">
        function LoadSuns(ctid, tid) {

            if ($DE(ctid).innerHTML.length < 10) {
                $DE('img' + tid).src = 'images/dedecontract.gif';
                var myajax = new DedeAjax($DE(ctid));
                myajax.SendGet('catalog_do.php?dopost=GetSunLists&cid=' + tid);
            } else {
                showHide(ctid, tid);
            }
        }

        function showHide(objname, tid) {

            if ($DE(objname).style.display == "none") {
                $DE('img' + tid).src = 'images/dedecontract.gif';
                $DE(objname).style.display = BROWSER.firefox ? "" : "block";
            } else {
                $DE('img' + tid).src = 'images/dedeexplode.gif';
                $DE(objname).style.display = "none";
            }
        }

        if (moz) {
            extendEventObject();
            extendElementModel();
            emulateAttachEvent();
        }

        //普通栏目
        function CommonMenu(eobj, obj, tid, tname) {
            var popupoptions
            popupoptions = [
                new ContextItem("增加内容", function () {
                    location = "catalog_do.php?cid=" + tid + "&dopost=addArchives";
                }),
                new ContextItem("管理内容", function () {
                    location = "catalog_do.php?cid=" + tid + "&dopost=listArchives";
                }),
                new ContextSeperator(),
                new ContextItem("预览分类", function () {
                    window.open("<?php echo $cfg_phpurl; ?>/list.php?tid=" + tid);
                }),
                new ContextItem("更新HTML", function () {
                    location = "makehtml_list.php?cid=" + tid;
                }),
                new ContextItem("获取JS文件", function () {
                    location = "catalog_do.php?cid=" + tid + "&dopost=GetJs";
                }),
                new ContextSeperator(),
                new ContextItem("增加子类", function () {
                    location = "catalog_add.php?id=" + tid;
                }),
                new ContextItem("更改栏目", function () {
                    location = "catalog_edit.php?id=" + tid;
                }),
                new ContextSeperator(),
                new ContextItem("合并栏目", function () {
                    location = 'catalog_do.php?dopost=unitCatalog&typeid=' + tid
                }),
                new ContextItem("移动栏目", function () {
                    location = 'catalog_do.php?dopost=moveCatalog&typeid=' + tid
                }),
                new ContextItem("删除栏目", function () {
                    location = "catalog_del.php?id=" + tid + "&typeoldname=" + tname;
                }),
                new ContextSeperator(),
                new ContextItem("向上排前一级", function () {
                    location = "catalog_do.php?cid=" + tid + "&dopost=upRank";
                }),
                new ContextItem("关闭菜单(<u>C</u>)", function () {
                })
            ]
            ContextMenu.display(eobj, popupoptions)
        }

        //封面模板
        function CommonMenuPart(eobj, obj, tid, tname) {
            var popupoptions
            popupoptions = [
                new ContextItem("管理内容", function () {
                    location = "catalog_do.php?cid=" + tid + "&dopost=listArchives";
                }),
                new ContextSeperator(),
                new ContextItem("预览分类", function () {
                    window.open("<?php echo $cfg_phpurl; ?>/list.php?tid=" + tid);
                }),
                new ContextItem("更新HTML", function () {
                    location = "makehtml_list.php?cid=" + tid;
                }),
                new ContextItem("获取JS文件", function () {
                    location = "catalog_do.php?cid=" + tid + "&dopost=GetJs";
                }),
                new ContextSeperator(),
                new ContextItem("增加子类", function () {
                    location = "catalog_add.php?id=" + tid;
                }),
                new ContextItem("更改栏目", function () {
                    location = "catalog_edit.php?id=" + tid;
                }),
                new ContextSeperator(),
                new ContextItem("移动栏目", function () {
                    location = 'catalog_move.php?job=movelist&typeid=' + tid
                }),
                new ContextItem("删除栏目", function () {
                    location = "catalog_del.php?id=" + tid + "&typeoldname=" + tname;
                }),
                new ContextSeperator(),
                new ContextItem("向上排前一级", function () {
                    location = "catalog_do.php?cid=" + tid + "&dopost=upRank";
                }),
                new ContextItem("关闭菜单(<u>C</u>)", function () {
                })
            ]
            ContextMenu.display(eobj, popupoptions)
        }

        //跳转栏目
        function SingleMenu(eobj, obj, tid, tname) {
            var popupoptions
            popupoptions = [
                new ContextItem("更改栏目", function () {
                    location = "catalog_edit.php?id=" + tid;
                }),
                new ContextSeperator(),
                new ContextItem("移动栏目", function () {
                    location = 'catalog_move.php?job=movelist&typeid=' + tid
                }),
                new ContextItem("删除栏目", function () {
                    location = "catalog_del.php?id=" + tid + "&typeoldname=" + tname;
                }),
                new ContextSeperator(),
                new ContextItem("向上排前一级", function () {
                    window.location = "catalog_do.php?cid=" + tid + "&dopost=upRank";
                }),
                new ContextItem("关闭菜单(<u>C</u>)", function () {
                })
            ]
            ContextMenu.display(eobj, popupoptions)
        }
    </script>
    <style>
        .coolbg2 {
            border: 1px solid #000000;
            background-color: #F2F5E9;
            height: 18px
        }

        .coolbt2 {
            border-left: 2px solid #EFEFEF;
            border-top: 2px solid #EFEFEF;
            border-right: 2px solid #ACACAC;
            border-bottom: 2px solid #ACACAC;
            background-color: #F7FCDA
        }

        .nbline {
            border-bottom: 1px solid #d6d6d6;
            background-color: #FFFFFF;
        }

        .bline2 {
            border-bottom: 1px solid #d6d6d6;
            background-color: #F9FCEF;
        }
    </style>
</head>
<body background='images/allbg.gif' leftmargin='8' onLoad="ContextMenu.intializeContextMenu()" topmargin='8'>
<table align="center" bgcolor="#cfcfcf" border="0" cellpadding="3" cellspacing="1" width="98%">
    <tr>
        <td background='images/tbg.gif' height="28" style="padding-left:10px;">
            <div style="float:left">
                <strong>网站栏目管理 </strong>
            </div>
            <div style="float:right;padding-right:6px;">
                <a class='np coolbg' href='catalog_add.php?listtype=all'>增加顶级栏目</a>
                <a class='np coolbg' href='catalog_add.php?dopost=quick'>批量增加栏目</a>
                <a class='np coolbg' href="catalog_do.php?dopost=upcatcache">更新栏目缓存</a>
                <a class='np coolbg' href="makehtml_list.php">更新栏目HTML</a>
                </a>
        </td>
    </tr>
    <tr>
        <td bgcolor="#ffffff" height="28">
            <table border="0" cellpadding="0" cellspacing="0" width="100%">
                <tr>
                    <td width="51%">提示：可使用右键菜单进行操作。</td>
                    <td align="right" width="49%">
                        <?php if(!isset($exallct)) { ?>
                        <a href='catalog_main.php?exallct=all'>[展开全部]</a>
                        <?php }else{ ?>
                        <a href='catalog_main.php'>[普通模式]</a>
                        <?php } ?>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
    <form action='catalog_do.php?dopost=upRankAll' method='post' name='form1'>
        <tr>
            <td bgcolor="#FFFFFF" height="120" valign="top">
                <?php
if(empty($opendir)) $opendir=-1;
if($userChannel>0) $opendir=$userChannel;
                $tu = new TypeUnit();
                $tu->ListAllType($userChannel,$opendir);
                ?>
                <br/>
            </td>
        </tr>
    </form>
    <tr>
        <td align="center" bgcolor="#FFFFFF" height="36">
            <table border="0" cellpadding="0" cellspacing="0" width="98%">
                <tr>
                    <td align="right">
                        <input class="coolbt" name="sb1" onClick="document.form1.submit();" style="width:70px"
                               type="button" value="更新排序"/>
                        <input class="coolbt" name="sb4" onClick="location='makehtml_js.php';" style="width:70px"
                               type="button" value="获取JS"/>
                        <input class="coolbt" name="sb2" onClick="location='makehtml_list.php';" style="width:90px"
                               type="button" value="更新栏目HTML"/>
                        <input class="coolbt" name="sb3" onClick="location='makehtml_archives.php';" style="width:90px"
                               type="button" value="更新文档HTML"/>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</body>
</html>